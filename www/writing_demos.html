<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Writing Demos for SwingSet3</title><style type="text/css"><!--.style1 {color: #000099}.style3 {color: #FF0000}.style4 {color: #0000FF}--></style></head><body><h2>Writing Demos for SwingSet3</h2><p>SwingSet3 presents the user with a set of demos displayed in a 3-level tree and allows the user to start, pause, and quit each demo. Demos are loaded lazily when the user double-clicks on them in the tree, thus avoiding unnecessary consumption of vm resources for demos that are never run.</p><p>It's extremely easy to write a demo for SwingSet3 (see <a href="#level1">Demo Level 1</a>), however incremental efforts will provide better integration into SwingSet3's GUI -- think of it sort of as 'progressive disclosure' for demo writing. Levels 1-4 are recommended; Levels 5-7 are completely optional! </p><table width="80%"  border="0" align="center" cellpadding="0" cellspacing="0">  <tr>    <td bgcolor="#C6BEFF"><a href="#level1">Demo Level 1: Extend JComponent</a></td>  </tr>  <tr>    <td bgcolor="#C6BEFF"><a href="#level2">Demo Level 2: Ensure Valid Default Demo Property Values</a></td>  </tr>  <tr>    <td bgcolor="#C6BEFF"><a href="level3">Demo Level 3: Provide Source Code for Demo Files</a></td>  </tr>  <tr>    <td bgcolor="#C6BEFF"><a href="level4">Demo Level 4: Support Source Code Fragment Highlighting</a></td>  </tr>  <tr>    <td bgcolor="#FFFF99"><a href="level5">Demo Level 5: Embed Demo in HTML Description File</a></td>  </tr>  <tr>    <td bgcolor="#FFFF99"><a href="level6">Demo Level 6: Enable Direct Component Snippet Highlighting </a></td>  </tr>  <tr>    <td bgcolor="#FFFF99"><a href="#level7">Demo Level 7: Implement stop() &amp; start() </a></td>  </tr></table><h3><br />  <a name="level1" id="level1"></a>Demo Level 1: Extend JComponent </h3><p> There are only two hard requirements for a demo to run in SwingSet3:</p><ol>  <li>demo class extends <code>javax.swing.JComponent </code>or one of<code> JComponent's subclasses </code></li>  <li>SwingSet3 needs to know the class name of your demo: </li></ol><blockquote>  <ul>    <li>if you are adding a demo for the swingset3.dev.java.net project you can simply edit the static list inside <code>SwingSet3.java</code></li>    <li>if your demo is <em>outside</em> the project, you can specify a file containing your demo class name(s) as a command line argument (and don't forget to specify your own jar on the classpath): </li>  </ul>  <blockquote>    <p> <code>java -cp mydemo.jar -jar swingset3.jar -augment &lt;mydemos.txt&gt;</code></p>    <p> where <code>&lt;mydemos.txt&gt;</code> is a file containing the class name(s) of your demo(s)</p>  </blockquote></blockquote><h3><a name="level2" id="level2"></a>Demo Level 2: Ensure Valid Default Demo Property Values</h3><p>While a demo can run in SwingSet3 without a specified category, icon, description, or source file array, the user experience will be improved if these properties exist. Following is the table of properties that SwingSet3 utilizes; if these are not explicitly implemented by the demo class, SwingSet3 wil synthesize their values: </p><table width="98%"  border="1" cellspacing="4" cellpadding="4">  <tr>    <td><strong>Property </strong></td>    <td><strong>Type</strong></td>    <td><strong>Description</strong></td>    <td><strong>Default Value </strong></td>  </tr>  <tr>    <td>name</td>    <td>String</td>    <td>name of demo as displayed to user</td>    <td>uses demo class name, removing any trailing &quot;Demo&quot; string if it exists; <span class="style1">e.g. JButtonDemo is named &quot;JButton&quot;</span></td>  </tr>  <tr>    <td>category</td>    <td>String</td>    <td>category used to group demo inside demo selection tree</td>    <td>uses the demo class's package name or &quot;general&quot; if no package name exists; <span class="style1">e.g. controls.JButtonDemo has category: &quot;controls&quot; </span></td>  </tr>  <tr>    <td>icon</td>    <td>Icon</td>    <td>icon displayed to user for demo</td>    <td>looks for file in ./resources/images that matches the class name but has a &quot;.jpg&quot;, &quot;.gif&quot;, or &quot;.png&quot; extension, if none found, displays generic demo icon; <span class="style1">e.g. ./resources/images/JButtonDemo.gif</span></td>  </tr>  <tr>    <td>shortDescription</td>    <td>String</td>    <td>one line describing demo's purpose </td>    <td>uses toolTipText property on demo class or provides no short description if none found</td>  </tr>  <tr>    <td>descriptionURL</td>    <td>URL</td>    <td>url for HTML file which describes and embeds demo </td>    <td>looks for file in ./resources that matches the class name with &quot;.html&quot; extension, if none found then does not display html description (only instantiates demo class); <span class="style1">e.g. ./resources/JButtonDemo.html </span></td>  </tr>  <tr>    <td>sourceFiles</td>    <td>URL[] </td>    <td>provides url to each source file</td>    <td>array of length 1 with url to demo class name source file; note this does require the source file to be copied to the classes/sources directory (using simple ant task)</td>  </tr></table><p>Use the following steps to set the core properties for your demo:</p><ol>  <li>    <p> Make sure the demo class <strong>name</strong> provides the user with clue as to what the demo does.</p>  </li>  <li>    <p>Put the demo class inside a package with a name that fits the demo's <strong>category</strong> . example: <code>containers.JXPanelDemo</code> would go in the &quot;containers&quot; category).</p>  </li>  <li>    <p>Create a nice icon image for your demo, naming it the same name as the demo class. example: <code>./resources/images/JXPanelDemo.png</code></p>  </li>  <li>    <p>Provide the following <em>static</em> method on your demo class to ensure your demo's short description is available as a tooltip on the tree node for your demo: </p>    <blockquote>      <pre><code>public static String getShortDescription() {     return &quot;SwingX's panel component that provides alpha transulcency&quot;;}</code></pre>    </blockquote>  </li></ol><p>&nbsp; </p><h3><a name="level3" id="level3"></a>Demo Level 3: Provide Source Code for Demo Files</h3><p>The source code display (and fragment highlighting) are a key SwingSet3 feature, so you'll want to ensure SwingSet3 can find the source files for your demo:</p><ol>  <li> If the demo consists of<em> more than one</em> source file, then provide the following static method on your demo class:    <blockquote>      <pre><code> public static URL[] getSourceFiles() </code></pre>      <p> Note: if it's just the one source file, then this step is unnecessary.</p>    </blockquote>  </li>  <li> If you are creating a demo outside of the swingset3.dev.java.net project, make sure the source files exist in your demo's jar file in the classes/sources directory; e.g. classes/sources/containers/JXPanelDemo.java<br />    the following ant task can be used to make this automatic:<blockquote>      <pre><code>&lt;target name=&quot;-post-compile&quot;&gt;  &lt;delete dir=&quot;${build.classes.dir}/sources&quot; /&gt;   &lt;copy todir=&quot;${build.classes.dir}/sources&quot; verbose=&quot;true&quot; overwrite=&quot;true&quot; includeEmptyDirs=&quot;false&quot;&gt;    &lt;fileset dir=&quot;${src.dir}&quot;&gt;      &lt;include name=&quot;**/*.java&quot; /&gt;    &lt;/fileset&gt;  &lt;/copy&gt;&lt;/target&gt;</code></pre>    </blockquote>  </li></ol><h3><a name="level4" id="level4"></a>Demo Level 4: Support Source Code Fragment Highlighting</h3><p>SwingSet3's source code &quot;snippet&quot; highlighting makes it easy for developers to view specific code fragments associated with specific features within a demo. Each such feature is described by a 'key', which is a simple description of what the feature does. Supporting this simply requires adding the required snippet tags to comments within your source code. </p><p> The text following immediately after the snippet start tag (<code>&lt;snip&gt;</code>) will be used as the key for that snippet. <br />Multiple snippets may share the same key, defining a &quot;snippet set&quot; for a particular feature. Snippet sets may even span across multiple source files. The key for each snippet set is displayed in a combobox to allow the user to select which snippet set should be highlighted. For example:&lt;p&gt;</p><blockquote>  <pre> <code>    //<span class="style4">&lt;snip&gt;</span><span class="style3">Create dog array</span>     ArrayList dogs = new ArrayList();     //<span class="style4">&lt;/snip&gt;</span>          [other code...maybe even in another source file]          //<span class="style4">&lt;snip&gt;</span><span class="style3">Create dog array</span>     dogs.add(&quot;Labrador&quot;);     dogs.add(&quot;Golden Retriever&quot;);     dogs.add(&quot;Australian Shepherd&quot;);     //<span class="style4">&lt;/snip&gt;</span></code></pre></blockquote><p>The above code would create a snippet set (containing 2 snippets) with the key &quot;Create dog array&quot;. This key would be displayed in the combobox in SwingSet3's source code display panel and when the user selects it, those snippets will become highlighted and can be navigated using buttons or accelerator keys.</p> <h3><br />   <a name="level5" id="level5"></a>Demo Level 5: Embed Demo in HTML Description File </h3> <p>If you'd like to provide a nice HTML page describing your demo (with associated links to docs, etc) and have the demo instantiated inside the HTML page:</p> <ol>   <li> provide an html file with the same name as your demo class; e.g. <code>./resources/JXPanelDemo.html</code></li>   <li>embed the demo class in the html file using the <code>&lt;object&gt;</code> tag:</li> </ol> <blockquote>   <p> <code>&lt;object classid=&quot;swingset3.demos.controls.JXPanelDemo&quot;&gt; </code></p> </blockquote> <p> If no such html file exists, then the demo class will simply be instantiated directly in SwingSet3's demo pane.</p><h3><a name="level6" id="level6"></a>Demo Level 6: Enable Direct Component Snippet Highlighting</h3><p>In SwingSet3 it's possible to enable a popup menu on components within your demo so that the user can go directly to the code associated with creating that particular component.</p><p> All that is required is to add a client property to that specific component in your demo that maps it to the snippet key (as described in <a href="#level4">Demo Level 4</a>):</p><blockquote>  <p> e.g. The following source will cause a popup menu to be created on the &quot;Go&quot; button, which when activated will automatically highlight the snippets associated with creating that button:</p>  <pre> <code>//&lt;snip&gt;<span class="style3">Create button with background color</span> button = new JButton(&quot;Go&quot;); button.setBackground(Color.green); button.setContentAreaFilled(true); button.setOpaque(false); button.setToolTipText(&quot;button with background color&quot;); //&lt;/snip&gt;</code></pre>  <pre><code> // ENABLE POPUP!  <strong>button.putClientProperty(&quot;snippetKey&quot;, &quot;<span class="style3">Create button with background color</span>&quot;);</strong> </code></pre></blockquote><h3><a name="level7" id="level7"></a>Demo Level 7: Implement start() and stop()</h3><p>SwingSet3 allows the user to run many demos at once, however there is only ever one &quot;current&quot; demo visible to the user at a time. If your demo needs to detect when it is being paused and restarted as a result of the user switching between &quot;current&quot; demos, then you may implement the following methods:</p><blockquote>  <pre><code>public void start()</code></pre>  <pre><code>public void stop()</code></pre></blockquote><p>Note that SwingSet3 uses reflection to determine whether to invoke these methods, so they are completely optional. They are recommended if your demo does any sort of processing that you don't want executing while your demo is paused (animation timers, etc). </p></body></html>